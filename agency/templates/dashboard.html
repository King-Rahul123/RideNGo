{% load static %}

<!Doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="icon" href="{% static 'media/Logo.jpeg' %}">
    {% block title %}
    {% endblock title %}
    <link rel="stylesheet" href="/static/css/dashboard.css">
    <script src="/static/js/dashboard.js" defer></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    {% block script %}{% endblock script %}
    {% block style %}{% endblock style %}
</head>
<body>
    <div class="app">
        <aside class="sidebar">
            <div class="brand">
                <div class="avatar">{{ user.first_name|default:user.username|slice:":1"|upper }}</div>
                <div class="user">
                    <h4>{{ user.username }}</h4>
                    <p>{{ user.first_name }}</p>
                </div>
            </div>

            <nav>
                <a href="{% url "dashboard_home" %}"><i class="fas fa-home"></i> Overview</a>
                <a href="{% url "vehicles" %}"><i class="fas fa-car"></i> Vehicles</a>
                <a href="{% url "driver" %}"><i class="fas fa-user"></i> Driver Details</a>
                <a href="{% url "bookings" %}"><i class="fas fa-clipboard-list"></i> Bookings</a>
                <a href="{% url "set_amount" %}"><i class="fa fa-rupee"></i> Set Amount</a>
            </nav>

            <div class="bottom-links">
                <a href="#" class="settings-link" data-bs-toggle="modal" data-bs-target="#forgetPasswordModal"><i class="fas fa-key"></i> Reset Password</a>
                <a onclick="window.location.href='{% url 'logout' %}'" class="btn btn-outline-danger logout-btn">Logout</a>
            </div>
        </aside>
        {% block main-content %}
        {% endblock main-content %} 
        {% if messages %}
        <div class="toast-container">
            {% for message in messages %}
                <div class="toast-message {{ message.tags }}">
                    {{ message }}
                </div>
            {% endfor %}
        </div>
        {% endif %}
    </div>

    <input type="hidden" id="csrfToken" value="{{ csrf_token }}">

    <script>
        setTimeout(() => {
            document.querySelectorAll('.toast-message').forEach(t => t.remove());
        }, 4000);
    </script>
</body>
</html>